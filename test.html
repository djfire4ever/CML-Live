<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Template Test</title>
</head>
<body>
    <!-- Template (Invoice HTML with Placeholders) -->
    <div id="invoice-template" style="display:none;">
        <h2>Invoice Details</h2>
        <table border="1">
            <tr>
                <td>Quote Date</td>
                <td>{{quoteDate}}</td>
            </tr>
            <tr>
                <td>Phone</td>
                <td>{{phone}}</td>
            </tr>
            <tr>
                <td>First Name</td>
                <td>{{firstName}}</td>
            </tr>
            <tr>
                <td>Last Name</td>
                <td>{{lastName}}</td>
            </tr>
            <tr>
                <td>Email</td>
                <td>{{email}}</td>
            </tr>
            <tr>
                <td>Street</td>
                <td>{{street}}</td>
            </tr>
            <tr>
                <td>City</td>
                <td>{{city}}</td>
            </tr>
            <tr>
                <td>State</td>
                <td>{{state}}</td>
            </tr>
            <tr>
                <td>Zip</td>
                <td>{{zip}}</td>
            </tr>
            <tr>
                <td>Event Date</td>
                <td>{{eventDate}}</td>
            </tr>
            <tr>
                <td>Event Location</td>
                <td>{{eventLocation}}</td>
            </tr>
            <tr>
                <td>Addon Totals</td>
                <td>{{addonsTotal}}</td>
            </tr>
            <tr>
                <td>Deposit</td>
                <td>{{deposit}}</td>
            </tr>
            <tr>
                <td>Deposit Date</td>
                <td>{{depositDate}}</td>
            </tr>
            <tr>
                <td>Balance Due</td>
                <td>{{balanceDue}}</td>
            </tr>
            <tr>
                <td>Balance Due Date</td>
                <td>{{balanceDueDate}}</td>
            </tr>
            <tr>
                <td>Payment Method</td>
                <td>{{paymentMethod}}</td>
            </tr>
            <tr>
                <td>Total Product Retail</td>
                <td>{{totalProductRetail}}</td>
            </tr>
            <tr>
                <td>SubTotal 1</td>
                <td>{{subTotal1}}</td>
            </tr>
            <tr>
                <td>SubTotal 2</td>
                <td>{{subTotal2}}</td>
            </tr>
            <tr>
                <td>SubTotal 3</td>
                <td>{{subTotal3}}</td>
            </tr>
            <tr>
                <td>Discount</td>
                <td>{{discount}}</td>
            </tr>
            <tr>
                <td>Discounted Total</td>
                <td>{{discountedTotal}}</td>
            </tr>
            <tr>
                <td>Grand Total</td>
                <td>{{grandTotal}}</td>
            </tr>
            <tr>
                <td>Invoice ID</td>
                <td>{{invoiceID}}</td>
            </tr>
            <tr>
                <td>Invoice Date</td>
                <td>{{invoiceDate}}</td>
            </tr>
        </table>
    </div>

    <!-- Placeholder for the generated invoice -->
    <div id="invoice-container"></div>

    <script>
        // Sample data object (simulate database data)
        const data = {
            quoteDate: "2025-05-10T15:00:00",
            phone: "123-456-7890",
            firstName: "John",
            lastName: "Doe",
            email: "johndoe@example.com",
            street: "123 Main St",
            city: "Sample City",
            state: "SC",
            zip: "12345",
            eventDate: "2025-05-20T12:00:00",
            eventLocation: "Sample Venue",
            addonsTotal: 50.00,
            deposit: 100.00,
            depositDate: "2025-05-01T12:00:00",
            balanceDue: 150.00,
            balanceDueDate: "2025-05-15T12:00:00",
            paymentMethod: "Credit Card",
            totalProductRetail: 500.00,
            subTotal1: 200.00,
            subTotal2: 150.00,
            subTotal3: 150.00,
            discount: 50.00,
            discountedTotal: 450.00,
            grandTotal: 450.00,
            invoiceID: "INV-12345",
            invoiceDate: "2025-05-10T15:00:00"
        };

        // Function to replace placeholders in the invoice template
        function generateInvoice(data) {
            let invoiceTemplate = document.getElementById("invoice-template").innerHTML;

            // Replace placeholders with actual data
            invoiceTemplate = invoiceTemplate.replace(/{{quoteDate}}/g, formatDate(data.quoteDate));
            invoiceTemplate = invoiceTemplate.replace(/{{phone}}/g, data.phone);
            invoiceTemplate = invoiceTemplate.replace(/{{firstName}}/g, data.firstName);
            invoiceTemplate = invoiceTemplate.replace(/{{lastName}}/g, data.lastName);
            invoiceTemplate = invoiceTemplate.replace(/{{email}}/g, data.email);
            invoiceTemplate = invoiceTemplate.replace(/{{street}}/g, data.street);
            invoiceTemplate = invoiceTemplate.replace(/{{city}}/g, data.city);
            invoiceTemplate = invoiceTemplate.replace(/{{state}}/g, data.state);
            invoiceTemplate = invoiceTemplate.replace(/{{zip}}/g, data.zip);
            invoiceTemplate = invoiceTemplate.replace(/{{eventDate}}/g, formatDate(data.eventDate));
            invoiceTemplate = invoiceTemplate.replace(/{{eventLocation}}/g, data.eventLocation);
            invoiceTemplate = invoiceTemplate.replace(/{{addonsTotal}}/g, formatCurrency(data.addonsTotal));
            invoiceTemplate = invoiceTemplate.replace(/{{deposit}}/g, formatCurrency(data.deposit));
            invoiceTemplate = invoiceTemplate.replace(/{{depositDate}}/g, formatDate(data.depositDate));
            invoiceTemplate = invoiceTemplate.replace(/{{balanceDue}}/g, formatCurrency(data.balanceDue));
            invoiceTemplate = invoiceTemplate.replace(/{{balanceDueDate}}/g, formatDate(data.balanceDueDate));
            invoiceTemplate = invoiceTemplate.replace(/{{paymentMethod}}/g, data.paymentMethod);
            invoiceTemplate = invoiceTemplate.replace(/{{totalProductRetail}}/g, formatCurrency(data.totalProductRetail));
            invoiceTemplate = invoiceTemplate.replace(/{{subTotal1}}/g, formatCurrency(data.subTotal1));
            invoiceTemplate = invoiceTemplate.replace(/{{subTotal2}}/g, formatCurrency(data.subTotal2));
            invoiceTemplate = invoiceTemplate.replace(/{{subTotal3}}/g, formatCurrency(data.subTotal3));
            invoiceTemplate = invoiceTemplate.replace(/{{discount}}/g, formatCurrency(data.discount));
            invoiceTemplate = invoiceTemplate.replace(/{{discountedTotal}}/g, formatCurrency(data.discountedTotal));
            invoiceTemplate = invoiceTemplate.replace(/{{grandTotal}}/g, formatCurrency(data.grandTotal));
            invoiceTemplate = invoiceTemplate.replace(/{{invoiceID}}/g, data.invoiceID);
            invoiceTemplate = invoiceTemplate.replace(/{{invoiceDate}}/g, formatDate(data.invoiceDate));

            // Insert the filled template into the page
            document.getElementById("invoice-container").innerHTML = invoiceTemplate;
        }

        // Helper function to format date
        function formatDate(date) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(date).toLocaleDateString(undefined, options);
        }

        // Helper function to format currency
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);
        }

        // Call the generateInvoice function to render the invoice
        generateInvoice(data);
    </script>
</body>
</html>
