<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Slide 3 Isolation Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap (required for grid, buttons, carousel, utilities) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    rel="stylesheet"
  />

  <!-- Quote Manager core styles -->
  <link rel="stylesheet" href="quote-manager.css" />
  <link rel="stylesheet" href="qm-modules/project-theme.css" />

  <!-- Slide 3 ONLY -->
  <link rel="stylesheet" href="qm-modules/slide3.css" />
</head>

<body class="bg-black">

<div class="container py-4">
  <div class="quote-container d-flex flex-column" style="height: 80vh;">

    <!-- Navigation / Step Header (static for context) -->
    <div class="btn-group d-flex justify-content-between m-2 align-items-center">
      <button class="btn btn-sm btn-secondary" style="flex: 0 0 100px;">Back</button>

      <div class="step-nav mb-1 d-flex gap-2">
        <div class="step"><div class="circle">Client</div></div>
        <div class="step"><div class="circle">Event</div></div>
        <div class="step active"><div class="circle">Products</div></div>
        <div class="step"><div class="circle">Other</div></div>
        <div class="step"><div class="circle">Finalize</div></div>
      </div>

      <button class="btn btn-sm btn-secondary" style="flex: 0 0 100px;">Next</button>
    </div>

    <!-- Progress Bar -->
    <div class="progress project-theme border border-info mb-2">
      <div class="progress-bar project-theme" style="width: 40%;"></div>
    </div>

    <!-- Carousel Shell -->
    <div id="quoteCarousel" class="carousel slide flex-grow-1">
      <div class="carousel-inner">

        <!-- ================= Slide 3 ================= -->
        <div class="carousel-item active" id="slide3">

          <div class="slide3-header">
            <h4 class="glow-info mb-1">Products</h4>

            <div id="productSummaryCard"
                 class="product-summary-card project-theme"
                 title="Click for details">
              <div class="summary-line text-warning d-flex justify-content-between">
                <span class="count">0 items</span>
                <span class="total">$0.00</span>
              </div>
            </div>
          </div>

          <!-- Product Grid -->
          <div class="product-grid">
            <div class="add-product-tile project-theme">
              <i class="bi bi-plus"></i> Product
            </div>
          </div>

          <!-- Overlay -->
          <div id="product-overlay" class="product-overlay d-none">
            <div class="product-form-card project-theme">

              <h5 class="glow-info mb-3" id="overlay-title">Add Product</h5>

              <!-- Product Search -->
              <input type="search" class="productName-input mb-1" />
              <ul class="product-suggestions"></ul>

              <!-- Cost / Retail -->
              <div class="row g-2 align-items-end mt-2">
                <div class="col-3 text-info">Cost $</div>
                <div class="col-3 text-warning">
                  <span id="costPrice">0.00</span>
                </div>
                <div class="col-3 text-info">Retail $</div>
                <div class="col-3 text-warning">
                  <span id="retailPrice">0.00</span>
                </div>
              </div>

              <!-- Qty + Totals -->
              <div class="mt-3 border-top border-info pt-2">
                <div class="row g-2 align-items-center">
                  <div class="col-1">
                    <label class="form-label text-info">Qty</label>
                  </div>
                  <div class="col-2">
                    <input type="number"
                           id="qty"
                           class="form-control bg-black text-warning border-info"
                           min="1"
                           value="1" />
                  </div>
                  <div class="col-8">
                    <div class="d-flex justify-content-between text-warning">
                      <span>Total Cost:</span>
                      <span id="totalProductCost">$0.00</span>
                    </div>
                    <div class="d-flex justify-content-between text-warning">
                      <span>Total Retail:</span>
                      <span id="totalProductRetail">$0.00</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Action -->
              <div class="row g-2 mt-3 overlay-btn-group">
                <div class="col">
                  <button id="closeProduct" class="btn btn-info w-100">
                    Add & Close
                  </button>
                </div>
              </div>

            </div>
          </div>

        </div>
        <!-- =============== /Slide 3 =============== -->

      </div>
    </div>

  </div>
</div>

<!-- Bootstrap JS (needed for carousel even if static) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const addTile = document.querySelector(".add-product-tile");
    const overlay = document.getElementById("product-overlay");
    const closeBtn = document.getElementById("closeProduct");

    if (!addTile || !overlay) return;

    addTile.addEventListener("click", () => {
      overlay.classList.remove("d-none");
    });

    closeBtn?.addEventListener("click", () => {
      overlay.classList.add("d-none");
    });
  });
  
</script>
<script type="module" src="qm-modules/slide3-products.js"></script>
